////
; Copyright (c) uib gmbh (www.uib.de)
; This documentation is owned by uib
; and published under the german creative commons by-sa license
; see:
; https://creativecommons.org/licenses/by-sa/3.0/de/
; https://creativecommons.org/licenses/by-sa/3.0/de/legalcode
; english:
; https://creativecommons.org/licenses/by-sa/3.0/
; https://creativecommons.org/licenses/by-sa/3.0/legalcode
;
; credits: http://www.opsi.org/credits/
////

:Author:    uib gmbh
:Email:     info@uib.de
:Revision:  4.1
:Date:      12.01.2023
:toclevels: 6
:doctype:   book

ifeval::["{mode}" == "antora"]
include::common:partial$opsi_terms.adoc[]
endif::[]

[[opsi-manual-modules]]
= opsi-Erweiterungen

Auch wenn opsi Open-Source-Software ist, so gibt es einige zusätzliche Komponenten, die wir im Rahmen eines Kofinanzierungs-Projektes erstellt haben und pflegen. Diese sind (noch) nicht kostenlos erhältlich. Die opsi-Erweiterungen erweitern die Funktionalität -- vor allem und auch im Hinblick auf spezielle Einsatzszenarien.

Zur Zeit (Januar 2023) gibt es folgende opsi-Erweiterungen:

* user roles: xref:configed#opsi-manual-configed-hostproperties-userroles[Verwaltung von Benutzerrollen]
* opsi-directory-connector: xref:modules/directory-connector#opsi-manual-dircon[Zusammenarbeit mit Verzeichnisdienst]
* opsi-wim-capture: xref:modules/wim-capture#opsi-manual-wimcap[Windows Imaging Format]
* opsi-linux-client-agent: xref:modules/linux#opsi-manual-linux[Linux-Support]
* opsi-mac-client-agent: xref:mac-client-manual/mac-client-manual[macOS-Support]
* UEFI-Unterstützung: xref:modules/uefi#opsi-manual-uefi[opsi mit UEFI/GPT]
* Secureboot-Unterstützung: xref:modules/secureboot#opsi-manual-secureboot[opsi mit Secureboot]
* opsi-local-image/opsi-vhd-reset: xref:modules/local-image#opsi-manual-localimage[Lokale Images] und xref:modules/vhd#opsi-manual-vhd[Virtual Hard Disk]
* Lizenzmanagement: xref:modules/licensemanagement#opsi-manual-licensemanagement[Verwaltung von Software-Lizenzen]
* WAN/VPN-Erweiterung: xref:modules/wan-support#opsi-manual-wansupport[Verwaltung von Clients hinter langsamen/instabilen Verbindungen]
* opsi-Nagios-Connector: xref:modules/nagios-connector#opsi-Nagios-Connector[Schnittstelle für Nagios/Icinga]
* MySQL-Backend: xref:server/opsi-backends#opsi-manual-backends-mysql-configdata-overview[Datenbank-Backend für Konfigurationsdaten]
* Scalability: xref:modules/scalability/opsi-manual-scalability[Mehrere Worker-Prozesse]

NOTE: Für die kostenpflichtigen Erweiterungen benötigen Sie eine Freischaltdatei. Sie erhalten diese, nachdem Sie die Erweiterung gekauft haben. Zu Evaluierungszwecken stellen wir Ihnen kostenlos eine zeitlich befristete Freischaltung zur Verfügung. Bitte kontaktieren Sie uns dazu per mailto:sales@uib.de[E-Mail].

Die Module werden über Lizenz-Dateien freigeschaltet.
Diese Dateien besitzen die Endung `.opsilic` und werden im Verzeichnis `/etc/opsi/licenses` auf dem opsi-Configserver abgelegt.
Die Lizenz-Dateien können manuell in diesem Verzeichnis abgelegt oder über das opsiconfd-Admin-Interface hochgeladen werden (https://<configserver>:4447/admin/#licensing). Auf dieser Seite werden auch Informationen über die aktuelle Lizenzierung angezeigt.

In der Vergangenheit wurden die Module über die Datei `/etc/opsi/modules` freigeschaltet.
Diese Datei behält auch weiterhin ihre Gültigkeit.
Neue Lizenzen werden jedoch nur noch im neuen Format ausgestellt.

Sind keine Lizenz-Dateien vorhanden, sind nur die freien Komponenten von opsi aktiv.

[[opsi-manual-modules-check]]
== Freischaltung für opsi-Erweiterungen überprüfen

Überprüfen Sie die Freischaltung mithilfe einer der folgenden Methoden:

* Im opsiconfd-Admin-Interface (https://<configserver>:4447/admin/#licensing) werden Lizenzierungs-Informationen angezeigt.

* In der Management-Oberfläche (`opsi-configed`) rufen Sie aus dem Menü _Hilfe_ den Eintrag _Validierungsstatus der opsi-Module_ auf.
+
.Status der Freischaltung in der Management-Oberfläche anzeigen
image::configed_validierung-opsi-module.png["Status der Freischaltung in der Management-Oberfläche anzeigen", pdfwidth=70%]

* Verwenden Sie das Tool `opsi-admin` und rufen die Methode `backend_info` auf, um zu überprüfen, welche Module freigeschaltet sind.

== Überschreitung der Lizenzierung
Vor Überschreitung der Anzahl lizenzierter Clients erscheint im opsi-configed eine entsprechende Warnung.
Die Warnung wird hierbei über einen prozentualen und einen absoluten Grenzwert gesteuert.

Die Standardwerte sind hierbei:

* Prozentual: Warnung wenn die Client-Anzahl 95% der lizenzierten Client-Anzahl erreicht.
* Absolut: Warnung wenn die absolute Anzahl der freien Client-Lizenzen auf oder unter 5 Clients fällt.
* Tage: Warnung wenn die verbleibende Lizenzlaufzeit unter 30 Tagen fällt.

Die Grenzwerte können über die Config-Parameter `licensing.client_limit_warning_percent`, `licensing.client_limit_warning_absolute` und `licensing.client_limit_warning_days` gesteuert werden.

Diese Werte können beispielweise über `opsi-admin` festgelegt werden:
[source,prompt]
----
# Warnung beim Erreichen von 95% der lizenzierten Clients:
opsi-admin -d method config_createUnicode licensing.client_limit_warning_percent "licensing - client limit warning percent" 95 95
# Warnung wenn nur noch 5 freie Client-Lizenzen existieren:
opsi-admin -d method config_createUnicode licensing.client_limit_warning_absolute "licensing - client limit warning absolute" 5 5
# Warnung wenn nur noch 30 Tage bis Lizenzende verbleiben:
opsi-admin -d method config_createUnicode licensing.client_limit_warning_days "licensing - client limit warning days" 30 30

----
Wird die lizenzierte Client-Anzahl eines Moduls überschritten, wird das entsprechende Modul abgeschaltet.
Andere Module bleiben jedoch aktiv.

Mehr Informationen zu diesem Thema finden Sie unter link:https://www.uib.de/de/opsi-erweiterungen/erweiterungen/[opsi-Erweiterungen als Kofinanzierungsprojekte].

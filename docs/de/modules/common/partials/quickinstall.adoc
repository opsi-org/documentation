////
; Copyright (c) uib gmbh (www.uib.de)
; This documentation is owned by uib
; and published under the german creative commons by-sa license
; see:
; https://creativecommons.org/licenses/by-sa/3.0/de/
; https://creativecommons.org/licenses/by-sa/3.0/de/legalcode
; english:
; https://creativecommons.org/licenses/by-sa/3.0/
; https://creativecommons.org/licenses/by-sa/3.0/legalcode
;
; credits: https://www.opsi.org/credits/
////

:Author:    uib gmbh
:Email:     info@uib.de
:Revision:  4.1
:toclevels: 6
:doctype:   book

[[opsi-quickinstall-section]]
== opsi-QuickInstall

opsi-QuickInstall installiert schnell und einfach einen {opsi-server} unter Linux. Das Programm funktioniert unter den folgenden Distributionen (Namen entsprechen der `lsb_release`-Ausgabe, da QuickInstall selbst diese Bezeichnungen nutzt):

include::opsi-docs-en:common:partial$quickinstall-distros.adoc[]

[[opsi-quickinstall-prep]]
=== Vorbereitung

Stellen Sie sicher, dass der {opsi-Server} einen gültigen DNS-Hostnamen hat. Dazu betrachten Sie entweder die Datei `/etc/hosts` oder geben den folgenden Befehl ein: 

[source,prompt]
----
getent hosts $(hostname -f)
----

Das Ergebnis sollte beispielsweise so aussehen:

[source]
----
192.168.1.1 server.domain.tld server
----

In der Ausgabe auf Ihrem System sollten Sie im ersten Feld die IP-Adresse des Servers sehen, zu dem sich die opsi-Clients später verbinden. Danach folgt der dazugehörige Hostname. Im dritten Feld steht ein optionaler Alias (hier: `server`), unter dem der Rechner ebenfalls erreichbar ist. 

Sieht die Datei bei Ihnen anders aus und enthält etwa nur Angaben zu `127.0.0.1` oder `localhost`, dann bearbeiten Sie die Datei `/etc/hosts` im Texteditor Ihrer Wahl. Tragen Sie für den {opsi-server} mindestens die IP-Adresse und den vollständigen Hostnamen, optional ein Alias ein. 

NOTE: Weitere Informationen dazu finden Sie hier: https://docs.opsi.org/opsi-docs-de/4.2/getting-started/server/requirements.html#opsi-getting-started-introduction-software-and-configuration-preconditions

[[opsi-quickinstall-download]]
=== Download von opsi-QuickInstall

opsi-QuickInstall finden Sie auf unseren Servern unter dem folgenden Link: https://download.uib.de/opsi4.2/stable/quickinstall/

Laden Sie die Zip-Datei herunter und entpacken sie, z.{nbsp}B. mit diesem Kommando:

[source,prompt]
----
unzip opsi-quick-install.zip
----

Alternativ entpacken Sie das Archiv über den Dateimanager Ihrer grafischen Desktopumgebung (Rechtsklick / _Hier entpacken_). opsi-QuickInstall können Sie mit einer grafischen Oberfläche oder über die Kommandozeile installieren. Die nächsten beiden Abschnitte beschreiben beide Varianten. 

NOTE: Der Installer fragt nach so genannten Propertys. Weitere Informationen dazu finden Sie in der Dokumentation im Kapitel zum https://docs.opsi.org/opsi-docs-de/4.2/manual/modules/linux.html#opsi-manual-linux-localboot-l-opsi-server[Produkt l-opsi-server]. Dort können Sie auch die Default-Werte der Propertys nachlesen. Beachten Sie, dass für QuickInstall der Standard für `allow_reboot` auf `false` gesetzt ist.

[[opsi-quickinstall-gui]]
=== opsi-QuickInstall über GUI installieren

. Wechseln Sie im Dateimanager Ihrer Desktopumgebung ins Verzeichnis `gui` und führen Sie den Installer `opsi_quick_install_project` aus, z.{nbsp}B. mit einem Doppelklick.

. Im sich öffnenden Dialogfenster wählen Sie aus dem oberen Drop-down-Menü die Sprache für das Setup-Programm aus. Außerdem wählen Sie den _Setup-Typ_ aus. Entscheiden Sie sich hier für _Benutzerdefiniert_, dann können Sie detailliertere Einstellungen vornehmen.

.Wählen Sie die Sprache und die Art der Installation aus.
image::oqi.png["Screenshot: Wählen Sie die Sprache und die Art der Installation aus.", pdfwidth=50%]

. Klicken Sie auf _weiter >_. Im nächsten Dialog füllen Sie die folgenden Felder aus:
.. opsi-Admin-User: Tragen Sie hier den Benutzernamen des opsi-Admin-Benutzers ein. Wählen Sie unbedingt einen anderen Namen als den in diesem Beispiel gezeigten.
.. Passwort: Setzen Sie hier das Kennwort des opsi-Admin-Benutzers; wählen Sie ein starkes Passwort und nicht das in diesem Beispiel gezeigte.
.. IP-Namen: Tragen Sie `auto` ins Feld ein, um automatisch den Hostnamen des Computers zu verwenden.
.. IP-Nummer: Tragen Sie `auto` ein, um automatisch die IP-Adresses des Computers zu übernehmen.
. Klicken Sie auf _Übersicht_, um Ihre Angaben noch einmal zu kontrollieren. Wenn alles korrekt ist, klicken Sie auf _fertigstellen_, geben Ihr Passwort ein und bestätigen mit einem erneuten Klick auf _fertigstellen_. Danach startet die {opsi-server}-Installation.

TIP: Neben einigen Feldern finden Sie ein Symbol, das einen Tooltip mit weiteren Informationen zum Thema einblendet.

[[Information]]
.Fahren Sie mit der Maus über das kleine Symbol, um weitere Informationen einzublenden.
image::oqiInfo.png["Screenshot: Fahren Sie mit der Maus über das kleine Symbol, um weitere Informationen einzublenden.", pdfwidth=50%]


.Die opsi-server-Installation läuft.
image::quickinstall_l-opsi-server.png["Screenshot: Die opsi-server-Installation läuft.", pdfwidth=50%]

Die Installation kann einige Minuten dauern. Am Ende zeigt Ihnen opsi-QuickInstall an, ob sie erfolgreich war. Erhalten Sie die Meldung `success`, dann ist Ihr {opsi-server} betriebsbereit und fertig konfiguriert. Sie können nun mit dem Einspielen von https://docs.opsi.org/opsi-docs-de/4.2/getting-started/server/minimal-products.html[opsi-Produkten] beginnen.

Erhalten Sie stattdessen eine Fehlermeldung wie in <<oqiFailed>>, schauen Sie zunächst in den Logdateien nach, ob Sie den Fehler finden. Die Protokolle finden Sie in den beiden Dateien `/var/log/opsi-quick-install-l-opsi-server.log` und `/tmp/opsi_quickinstall.log`. Wenn Sie einen Support-Vertrag haben, können Sich auch direkt an den https://www.uib.de/de/support-schulung/support[uib-Support] wenden.

[[oqiFailed]]
.Ergebnis
image::oqiFailed.png["Screenshot: Ergebnis", pdfwidth=90%]

[[opsi-quickinstall-nogui]]
=== opsi-QuickInstall
[[opsi-quickinstall-nogui_start]]
==== Start
Öffnen Sie den Ordner "nogui" und führen Sie die Datei "opsi_quick_install_project" mit einem der folgenden Parameter in der Konsole als Root aus:

* `-d`, um die Standard-Werte für die Installation des {opsi-server} zu verwenden und die Installation direkt zu starten (WICHTIG: Dadurch legt QuickInstall den Opsi-Admin-User zunächst mit Beispiel-Werten für Namen und Passwort an, und zwar 'Alexandra'(Opsi-QuickInstall Version 4.2.0.1) beziehungsweise 'adminuser'(ab Opsi-QuickInstall Version 4.2.0.1-2) als Namen und 'linux123' als Passwort. Aus Sicherheitsgründen sollten Sie diese Werte unbedingt im Nachhinein ändern!),
* `-f <file>`, um die Werte aus einer Datei für die Installation des {opsi-server} zu verwenden und die Installation direkt zu starten,
* `-n`, (empfohlen) um ein Setup-Programm in der Konsole zu starten, in welchem Sie die Werte für die Installation einzeln bestimmen können.

Führen Sie also zum Beispiel
----
sudo ./opsi_quick_install_project -n
----
aus.

Die Funktionsweise des  Setup-Programms wird im Folgenden kurz beschrieben.

[[opsi-quickinstall-nogui_setup]]
==== Setup-Programm
Wenn Sie den Parameter `-n` gewählt haben, beantworten Sie die Fragen, die gestellt werden. Bei jeder Frage haben Sie auch die Möglichkeit, folgende Befehle einzugeben:

* `-b`, um zur vorigen Frage zurückspringen,
* `-h`, (nur bei Fragen, die am Ende mit einem `*` gekennzeichnet sind) um weitere Informationen zu dieser Frage zu erhalten,
* nichts eingeben und Enter drücken, um den Default-Wert für diese Frage zu verwenden.

Danach zeigt QuickInstall Ihnen eine Übersicht an, in der Sie nochmal alle Ihre Antworten kontrollieren können. Wenn alles korrekt ist, drücken Sie Enter, um die Installation des {opsi-server} zu starten.

[[opsi-quickinstall-nogui_installation]]
==== Installation des {opsi-server}
Die Installation des {opsi-server} kann einige Minuten dauern. Am Ende zeigt Ihnen QuickInstall an, ob sie erfolgreich war.

.Ergebnis
image::quickinstallNoGuiFailed.png["Screenshot: Ergebnis", pdfwidth=90%]

Ist das Ergebnis "success", dann ist Ihr {opsi-server} betriebsbereit und fertig konfiguriert. Sie können nun mit dem Einspielen von opsi-Produkten beginnen (siehe https://download.uib.de/opsi_stable/doc/html/opsi-getting-started-v4.2/opsi-getting-started-v4.2.html#opsi-getting-started-installation-config-get-essential-products). +
Beim Ergebnis "failed" können Sie in den Log-Dateien nach dem Fehler suchen oder sich, wenn Sie einen Support-Vertrag haben, gerne auch direkt an uib wenden.


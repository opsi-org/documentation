////
; Copyright (c) uib GmbH (www.uib.de)
; This documentation is owned by uib
; and published under the german creative commons by-sa license
; see:
; https://creativecommons.org/licenses/by-sa/3.0/de/
; https://creativecommons.org/licenses/by-sa/3.0/de/legalcode
; english:
; https://creativecommons.org/licenses/by-sa/3.0/
; https://creativecommons.org/licenses/by-sa/3.0/legalcode
;
; credits: https://www.opsi.org/credits/
////

:Author:    uib GmbH
:Email:     info@uib.de
:Date:      28.11.2023
:Revision:  4.3
:toclevels: 6
:doctype:   book
:icons:     font
:xrefstyle: full

include::common:partial$opsi_terms.adoc[]

[[opsi-manual-opsiwebgui-products]]
= Produkte 

Auf der Seite _Produkte_ können Sie Localboot- und Netboot-Produkte verwalten und für verschiedene opsi-Server oder -Clients konfigurieren.

.WebGUI: Localboot- und Netboot-Produkte
image::webgui/opsi-webgui_products.png["WebGUI: Localboot- und Netboot-Produkte", width=800, pdfwidth=80%]

TIP: Öffnen Sie die Tabelle _Clients_ und klicken Sie rechts oben auf den Button image:webgui/opsi-webgui_buttonproducts.png[Produkte], um Clients und Produkte in zwei Spalten nebeneinander anzuzeigen. Das erleichtert die Verwaltung und die Zuordnung der Produkte.

.WebGUI: Clients und Produkte
image::webgui/opsi-webgui_products-clients.png["WebGUI: Clients und Produkte", width=800, pdfwidth=80%]

[[opsi-manual-opsiwebgui-products-state]]
== Zustände

Wenn kein Client ausgewählt ist, listet die Tabelle _Produkte_ die Produkte des/der ausgewählten Server auf. Hat ein Produkt mehrere und widersprüchliche Werte für die aktuell ausgewählten Clients/Server, dann zeigt das entsprechende Feld einen _<mixed>_-Status. Fahren Sie mit der Maus darüber, um einen Tooltip mit weiterführenden Informationen einzublenden.

Die Symbole in der Tabelle _Produkte_ haben folgende Bedeutungen:

* Installationsstatus:
[horizontal]
  image:webgui/opsi-webgui_productstat_unequal_warning.png[alt=Icon für Installationsstatus unknown]:: Mindestens einer der ausgewählten Clients hat einen unbekannten (image:webgui/opsi-webgui_productstat_unknown.png[alt=unkown icon, width=50]) Installationsstatus.
  image:webgui/opsi-webgui_productstat_unequal_success.png[alt=Icon für Installationsstatus installed]:: Alle ausgewählten Clients haben entweder den Status installiert (image:webgui/opsi-webgui_productstat_installed.png[alt=installed icon, width=50]) oder nicht installiert (_not-installed_/_none_/_null_).
* Action Result:
[horizontal]
  image:webgui/opsi-webgui_productstat_unequal_danger.png[alt=Icon für Action Result failed]:: Mindestens einer der ausgewählten Clients hat eine Aktion durchgeführt, die fehlgeschlagen (image:webgui/opsi-webgui_productstat_failed.png[alt=icon failed action result, width=20]) ist.
  image:webgui/opsi-webgui_productstat_unequal_success.png[alt=Icon für Action Result successful]:: Alle ausgewählten Clients haben eine Aktion entweder erfolgreich (image:webgui/opsi-webgui_productstat_successful.png[alt=successful action result, width=20]) oder gar nicht (_none_/_null_) durchgeführt.
* Produktversion: Wenn mehrere Server und Clients ausgewählt sind, zeigen Sie im Tooltip die installierten Versionen auf den Clients an.
  - Clientbezogen:
[horizontal]
    image:webgui/opsi-webgui_productstat_version_clientoutdated.png[OutdatedProductVersionOnClients]:: Mindestens einer der ausgewählten Clients hat ein veraltetes Produkt im Vergleich zu seinem Server.
  - Serverbezogen:
[horizontal]
    image:webgui/opsi-webgui_productstat_version_server_equal.png[EqualProductVersionOnServers,30]:: Alle ausgewählten Server haben die gleiche Produktversion.
    image:webgui/opsi-webgui_productstat_version_server_unequal.png[UnequalProductVersionOnServers,30]:: Die ausgewählten Server haben unterschiedliche Produktversionen.
    image:webgui/opsi-webgui_productstat_version_server_star.png[NoProductOnSomeServers,30]:: Nicht jeder ausgewählte Server hat dieses Produkt.

Die Spalten sind so sortiert:

[horizontal]
Installationsstatus:: _installed_ , _unknown_, _none/not_installed_
Action Result:: _successful_, _failed_,  _none_
Produktversion:: _outdated on clients and unequal on servers_, _outdated on clients and not on every servers_, _outdated on clients_,  _unequal on some servers_

Bei absteigender Sortierung erscheinen die Werte in umgekehrter Reihenfolge, wobei _none/not_installed_ weiterhin zuletzt angezeigt wird.

[[opsi-manual-opsiwebgui-products-manage]]
== Produkte (de)installieren/aktualisieren

Um ein Produkt auf einem oder mehreren Clients zu installieren, zu deinstallieren oder zu aktualisieren, gehen Sie so vor:

. Wählen Sie Clients aus den xref:gui:webgui/userguide-clients.adoc#opsi-manual-opsiwebgui-opsiclients-groups[Client-Gruppen] oder in der Tabelle  xref:gui:webgui/userguide-clients.adoc#opsi-manual-opsiwebgui-opsiclients[Clients] aus.
. Öffnen Sie die Spalte _Produkte_ (Button image:webgui/opsi-webgui_buttonproducts.png[Produkte]).
. Wählen Sie das Produkt aus, für das Sie eine Aktion setzen möchten.
. Klicken Sie optional auf das Zahnradsymbol image:webgui/opsi-webgui_buttonconfig.png[Konfiguration], um auf dem Reiter _Eigenschaften_ die xref:opsi-manual-opsiwebgui-products-properties[Produkt-Eigenschaften] zu bearbeiten.
. Klicken Sie in der Spalte _Request_ auf die Schaltfläche _none_ und wählen aus dem Drop-down-Menü eine der folgenden Aktionen aus: _setup_, _uninstall, _update_, _once_, _always_, _custom_ oder _none_.

das Dropdown-Menü *ActionRequest* und wählen Sie die erforderliche Aktion aus den verfügbaren Optionen aus, z. B. setup, uninstall, update, once, always, custom and none.

opsi führt die Aktion nun unter Beachtung der xref:opsi-manual-opsiwebgui-products-properties[Eigenschaften] und xref:opsi-manual-opsiwebgui-products-dependencies[Abhängigkeiten] aus. Um eine Aktion sofort auszuführen, verwenden Sie die Aktion `on_demand` (siehe Abschnitt xref:gui:webgui/userguide-clients.adoc#opsi-manual-opsiwebgui-opsiclients-actions-ondemand[On Demand]).

Um eine Aktion auf mehrere Produkte anzuwenden, gehen Sie wie folgt vor:

. Wählen Sie in der Tabelle _Produkte_ die gewünschten Produkte aus.
. Klicken Sie in der Spaltenüberschrift der Tabelle auf das Drop-down-Menü _Request_ und wählen die gewünschte Aktion aus.

.WebGUI: Aktion für mehrere Produkte
image:webgui/opsi-webgui_productactionreq.png["WebGUI: Aktion für mehrere Produkte", pdfwidth=80%]

NOTE: Beachten Sie, dass nicht alle im Drop-down-Menü _Request_ angebotenen Aktionen für alle Produkte verfügbar sind. Gegebenenfalls zeigt das WebGUI eine Warnung an.

.WebGUI: Warnung über nicht-unterstützte Aktionen
image::webgui/opsi-webgui_productactionreq-warn.png["WebGUI: Warnung über nicht-unterstützte Aktionen", pdfwidth=80%]

include::partial$warn-quicksave.adoc[]


[[opsi-manual-opsiwebgui-products-manage-quick]]
== Produktschnellaktionen

Um alle Produkte auf den ausgewählten/allen Clients, die eine bestimmte Eigenschaft haben, zu ändern, bietet das WebGUI eine praktische Abkürzung. Klicken Sie dazu im Quick Panel unten im Bereich _Schnelle Aktionen_ auf die Schaltfläche _Produktschnellaktionen_. 

.WebGUI: Produktschnellaktionen im Quick Panel
image::webgui/opsi-webgui_productaction-fast.png["WebGUI: Produktschnellaktionen im Quick Panel", pdfwidth=80%, width=800]

Im sich öffnenden Dialog können Sie auswählen, welche Bedingungen erfüllt sein müssen (verknüpft durch ein logisches UND) und welche Aktionen Sie ausführen möchten. Über die beiden Checkboxen beschränken Sie die Clients auf _Nur ausgewählte Clients_; andernfalls gilt die Voreinstellung _Unabhängig von Server und Clients_.

Ein Beispiel: Auswahl von _Installationstatus: unknown_, _Action Result: failed_ und _Aktionen: setup_ auf allen Clients und Servern sorgt dafür, dass alle Produkte mit einem unbekanntem Installationsstatus und einem fehlgeschlagenen ActionResult auf _setup_ gesetzt werden.

CAUTION: Alle Änderungen werden sofort gespeichert, sobald Sie auf _Anwenden_ klicken -- auch wenn Sie die Funktion _Sofort speichern_ deaktiviert haben. 

[[opsi-manual-opsiwebgui-products-dependencies]]
==  Produkt-Abhängigkeiten
Die Abhängigkeiten listen die Produkte auf, die das ausgewählte Produkt benötigt, um korrekt zu funktionieren.
Zusätzlich wird die Installationsreihenfolge der Produkte dadurch definiert.
Je nach Produkt gibt es mehrere Anforderungstypen, wie 

[horizontal]
_required_:: Das Hauptprodukt erfordert das abhängige Produkt, aber die Installationsreihenfolge ist nicht relevant.
_pre-required_:: Das abhängige Produkt wird vor dem Hauptprodukt installiert.
_post-required_:: Das abhängige Produkt wird nach dem Hauptprodukt installiert.

Um die Produkt-Abhängigkeiten anzuzeigen,

. Klicken Sie in der Produktzeile auf die Produkt-Einstellungen image:webgui/opsi-webgui_buttonconfig.png[Config Button].
. Wählen Sie den Reiter *[ Abhängigkeiten ]*.

image::webgui/opsi-webgui_productdependency.png[Product Dependencies, width=600]

[[opsi-manual-opsiwebgui-products-properties]]
== Produkt-Eigenschaften
Jedes Produkt kann Eigenschaften besitzen (wie die Sprache der Anwendung), die generell für das Produktes, den Servers oder für Clients individuell gesetzt werden.
Sind keine Clients ausgewählt, werden die Werte des Servers bzw. falls dieser keine hat des Produktes angezeigt.
Wenn diese Werte verändert werden, bezieht sich die Änderung auf den/die ausgewählten Server. 
Bei Auswahl eines/mehrerer Clients werden die Werte erstmal vom Server zu den Clients vererbt. 
Dann werden Wert-Änderungen zu den ausgewählten Clients speziell verändert werden.

Um Produkt-Eigenschaften zu aktualisieren gehen Sie wie folgt vor:

. Navigieren Sie zur Seite *Produkte*.
. Wählen Sie Server und/oder Clients aus.
. Klicken Sie in der Zeile des gewünschten Produkts auf image:webgui/opsi-webgui_buttonconfig.png[Config Button].
. Wählen Sie die *[ Eigenschaften ]*.
. Aktualisieren Sie die Eigenschaft, indem Sie auf den Auswahlkasten klicken oder eine/mehrere Optionen aus der Auswahlliste auswählen.
Die Optionen in der Auswahlliste können gefiltert werden.
Wenn die Eigenschaft editierbar ist (Sie können eigene Werte hinzufügen), kann der im Filterfeld eingegebene Wert hinzugefügt werden, indem Sie auf die *[ Hinzufügen ]* klicken oder *Enter* drücken.
Die neu eingegebene Option wird nur gespeichert, wenn sie ausgewählt wird.

Wenn Clients ausgewählt sind bezieht sich die Änderung ausschließlich auf die ausgewählten Clients. 
Die Serverwerte werden nur aktualliesiert, wenn keine Clients ausgewählt sind.

image::webgui/opsi-webgui_productprop.png[Produkt-Eigenschaften, width=600]

include::partial$warn-quicksave.adoc[]


[horizontal]
Produkt-Beschreibung:: Die Produktbeschreibung wird zwischen dem Titel und den Tabs angezeigt.
Mögliche Warnungen:: 
* _Es sind keine Clients ausgewählt, die Änderungen beziehen sich auf den/die Server_.
* _Dieses Produkt ist nur auf 2/5 der ausgewählten Server installiert._ 
* _Für dieses Produkt gibt es verschiedene Versionen._ (Möglicherweise hat nicht jede Version die selben Eigenschaften)
image:webgui/opsi-webgui_buttoninfo.png[Info]:: zeigt neben der Property-ID weitere Details zur Eigenschaft an, darunter den für das Produkt definierten Standardwert, den Standardwert des Servers und die Beschreibung der Eigenschaft.
_<mixed>_:: Wenn die ausgewählten Clients unterschiedliche Werte haben, wird der Status *_<mixed>_* angezeigt.
image:webgui/opsi-webgui_productstat_version_clientunequal.png[UnequalPropOnClients]:: Klicken Sie auf dieses Symbol rechts neben dem Werte-Dropdown, um die verschiedenen Werte für die ausgewählten Clients anzuzeigen.

Wenn die ausgewählten Server das Produkt mit unterschiedlichen Versionen haben, ist es möglich, dass sie unterschiedliche Eigenschaft oder unterschiedliche Standardwerte haben.
Ähnlich wie die Produktversion ist sie mit Symbolen gekennzeichnet, z. B. +

[horizontal]
image:webgui/opsi-webgui_productstat_version_server_unequal.png[UnequalDefaultPropsOnServers]:: Die ausgewählten Server haben unterschiedliche Standardwerte für dieses Produkt.
image:webgui/opsi-webgui_productstat_version_server_star.png[UnequalPropertyOnServers]:: Nicht jeder Server aus der aktuellen Auswahl hat diese Eigenschaft.

[[opsi-manual-opsiwebgui-products-groups]]
== Produktgruppen
Produkte können zur besseren Verwaltung und auch zur einfacheren Installation mehrerer Produkte zu Gruppen hinzugefügt werden.


In der Schnellnavigation werden die Gruppen und ihre Produkte in einer Baumstruktur unter dem Reiterimage:webgui/opsi-webgui_quickpanel_tab_products.png[Productgroups tab in quickpanel] angezeigt.
Die Zahl neben dem Icon entspricht der Anzahl der ausgewählten Produkte.
Der erste Tab image:webgui/opsi-webgui_quickpanel_tab_selection.png[Auswahl-Tab im Quickpanel] zeigt eine Schnellansicht der editierbaren Liste aller Auswahlen.

image::webgui/opsi-webgui_quickpanel_tab_products_content.png[Product tab content in quickpanel, width=300]

// image::webgui/opsi-webgui_productgroups.png[Product Groups]

Aktuell ist es nicht möglich ein Produkt zu einer Gruppe in opsi-webgui hinzuzufügen, aber wenn in Ihrer Umgebung bereits Gruppen definiert sind (z.B. über {opsi-configed}), können Sie die Gruppen auswählen.
Dadurch werden alle Produkte innerhalb der Gruppe ausgewählt.
Dies erleichtert die Installation über das *ActionRequest*-Dropdown in der Spaltenüberschrift der Tabelle.

TIP: Sortieren Sie die Produkttabelle nach der ersten Spalte (`selections`), um eine detaillierte Ansicht zu erhalten.

////
; Copyright (c) uib GmbH (www.uib.de)
; This documentation is owned by uib
; and published under the german creative commons by-sa license
; see:
; https://creativecommons.org/licenses/by-sa/3.0/de/
; https://creativecommons.org/licenses/by-sa/3.0/de/legalcode
; english:
; https://creativecommons.org/licenses/by-sa/3.0/
; https://creativecommons.org/licenses/by-sa/3.0/legalcode
;
; credits: https://www.opsi.org/credits/
////

:Author:    uib GmbH
:Email:     info@uib.de
:Date:      09.11.2023
:Revision:  4.3
:toclevels: 6
:doctype:   book
:icons:     font
:xrefstyle: full

include::common:partial$opsi_terms.adoc[]

[[opsi-manual-configed-clients]]
= Clients

Einl. was gibt es hier alles, kurzer Überblick über dieses Kapitel

[[opsi-manual-configed-client-selection]]
== Clients auswählen

Nachdem Sie sich erfolgreich angemeldet haben, ist in der Mitte des Hauptfensters der Reiter _Clients_ aktiviert. Dort sehen Sie eine Liste der Clients, die zum aktuell ausgewählten Depot bzw. zur Auswahl in der linken Seitenleiste (siehe Abschnitt <<opsi-manual-configed-treeview>>) gehören. Ein Rechtsklick auf die ausgewählten Clients öffnet ein Kontextmenü, über das Sie verschiedene Aktionen ausführen, z.{nbsp}B. Events auslösen, Nachrichten senden, herunterfahren und neustarten usw.

.*opsi-configed*: Kontextmenü der rechten Maustaste 
image::opsi-configed-clientselection.png["*opsi-configed*: Kontextmenü der rechten Maustaste", width=800, pdfwidth=80%]

Am oberen Rand gibt es ein Suchfeld, in das Sie eine Zeichenkette eingeben können. Direkt daneben bestimmen Sie über das Drop-down-Menü, wo `opsi-configed` suchen soll: in allen Spalten (bedeutet: in allen Spalten, die in der aktuellen Konfiguration eingeblendet sind), nach Client-Name, nach der Beschreibung, nach Status (ein-/ausgeschaltet), nach Datum (zuletzt gesehen) und nach der IP-Adresse. Das Drop-down-Menü _Modus_ definiert die Suche noch genauer: 

* _Volltext_: Nutzen Sie die Suche genau so, wie Sie es von Suchmaschinen kennen und geben Sie ein oder mehrere Suchwörter ein, die durch Leerzeichen getrennt sind. Für ein erfolgreiches Suchergebnis muss mindestens eines Ihrer Schlüsselwörter in einer der Spalten auftauchen. 

* _Volltext (vollständige Zeichenkette)_: Geben Sie Ihre Suchbegriffe ein, als würden Sie sie bei einer Suchmaschine in Anführungszeichen setzen. Das bedeutet, Sie müssen den exakten Text finden, der als Ganzes irgendwo in einer Spalte vorkommt.

* _Anfangstext_: Beginnen Sie Ihre Suche mit der Zeichenfolge, die Sie als Anfang eines Eintrages in einer Spalte finden möchten.

* _Regulärer Ausdruck_: Geben Sie den Suchbegriff als regulären Ausdruck ein, um Zeilen zu finden, in denen der Text einer Spalte den Mustern entspricht, wie sie in den Regeln der regulären Ausdrücke definiert sind. Für Details zu diesen Mustern schauen Sie bitte in die Java-Dokumentation für `java.util.regex.Pattern`.

Wenn Sie nach Eingabe Ihres Suchausdruckes die Taste [Eingabe] drücken, springt `opsi-configed` jeweils zum nächsten Treffer (ohne Treffer zur nächsten Zeile). Klicken Sie mit der rechten Maustaste ins Suchfeld, um weitere Optionen einzublenden.

.*opsi-configed*: Suchfunktion für Clientauswahl
image::opsi-configed-clientselection-search.png["*opsi-configed*: Suchfunktion für Clientauswahl", width=800, pdfwidth=80%]

=== Beispiele für Suchmuster

TIP: Nachfolgend finden Sie ein paar Beispiele für einfache und komplexe Suchmuster.

Wenn Sie in Namen oder Beschreibungen von PCs nach der Zeichenfolge "Meyer" suchen möchten, können Sie das Muster `.\*eyer.*` verwenden. Dabei steht der Punkt (`.`) für ein beliebiges Zeichen und das Sternchen (`\*`) für eine beliebige Anzahl von Vorkommen (des vorher bezeichneten Elements). `.*eyer.*` bedeutet also, das Suchmuster trifft zu, sofern vor `eyer` irgendetwas steht und dahinter wieder irgendetwas folgt. Da eine beliebige Anzahl von Vorkommen auch kein Vorkommen einschließt, passt beispielsweise auch der String "PC Meyer". 

NOTE: Um sicherzustellen, dass nicht auch Strings wie "Beyer" gefunden werden, sollte das Suchmuster allerdings besser `.\*[Mm]eyer.*` heißen. Die eckigen Klammern bedeuten, dass genau eines der aufgelisteten Zeichen (also ein `M` oder ein `m`) vorhanden sein muss.

Das zweite Beispiel zeigt Suchmuster für Produkte. `0.-opsi.*standard` sucht alle Produkte, deren Namen mit `0` beginnt, gefolgt von einem beliebigen Zeichen, gefolgt von `-opsi`, gefolgt von irgendwelchen Zeichen (in beliebiger Anzahl); am Schluss steht `standard`. Wenn Sie sicherstellen möchten, dass das zweite Zeichen eine Ziffer zwischen `0` und `9` ist, dann verwenden Sie diesen Ausdruck: `0[0123456789]-opsi.*standard`. Als Abkürzung für `[0123456789]` können Sie auch `[0-9]` schreiben, da es sich um eine ununterbrochene Teilfolge der Folge aller Ziffern handelt. Zu diesem Suchmuster passen beispielsweise die Produkte `03-opsi-abo-standard` und `05_opsi-linux_standard`. 

[[opsi-manual-configed-client-selection-table]]
== Clients auflisten

Die tabellarische Auflistung der Clients zeigt in der Voreinstellung die folgenden Spalten:

* _Client-Name_: Zeigt den FQDN, also den Hostnamen und den Domainnamen des Clients.

* _Beschreibung_: Hier darf eine beliebige Erläuterung stehen.

* _An_: Die Spalte zeigt an, welche Clients aktuell verbunden sind. Dazu klicken Sie links oben in der Icon-Gruppe auf das zweite von rechts. Dieses Feature können Sie bereits im Anmeldebildschirm oder über einen Aufrufparameter aktivieren. In der Voreinstellung ist das Testintervall auf 0 Minuten gesetzt, was bedeutet, dass diese Funktion deaktiviert ist.

.*opsi-configed*: Client erreichbar
image::opsi-configed-client-erreichbar.png["Client erreichbar", width=20]

.*opsi-configed*: Client nicht erreichbar
image::opsi-configed-client-nicht-erreichbar.png["Client nicht erreichbar", width=20]

.*opsi-configed*: Über dieses Icon prüfen Sie, welche Clients verbunden sind.
image::configed_toolbar_icons_connected.png["*opsi-configed*: Über dieses Icon prüfen Sie, welche Clients verbunden sind.", pdfwidth=80%]

* _Zuletzt gesehen_: Hier sehen Sie das Datum und die Uhrzeit, zu denen der Client sich zuletzt bei der Softwareverteilung über den Dienst `opsiconfd` gemeldet hat.

* _IP-Adresse_: Die Spalte zeigt die IP-Adresse des Clients.

Klicken Sie auf einen Spaltentitel, um die Reihenfolge umzukehren. Optional können Sie weitere Spalten einblenden, wenn Sie mit der rechten Maustaste auf die Tabelle klicken und im Kontextmenü den Eintrag _Sichtbare Spalten_ öffnen. Wählen Sie jetzt die Spalten aus, die Sie zusätzlich einblenden möchten: _WAN-Konfiguration_, _System-UUID_, _MAC-Adresse_, _Session-Informationen_, _Inventarnummer_, _Erstellungsdatum_, _Install on Shutdown_ und _Depot_.

TIP: Um diese zusätzlichen Spalten dauerhaft im `opsi-configed` einzublenden, wechseln Sie über das Icon oben rechts in die Server-Konfiguration (siehe Kapitel xref:gui:configed/userguide-server.adoc[Server-Konfiguration]) und dort zum Reiter _Host-Parameter_. Bearbeiten Sie die Option _configed_ / _configed.host_displayfields_.

.*opsi-configed*: Konfigurieren Sie, welche Spalten die Clientliste anzeigt.
image::opsi-configed-config-host-displayfields.png["*opsi-configed*: Konfigurieren Sie, welche Spalten die Clientliste anzeigt.", width=800, pdfwidth=80%]

Wenn Sie die Spalte _Session-Informationen_ hinzufügen, wird der Button _Abfrage der Session-Informationen von allen Clients_ in der Icon-Gruppe links oben aktiviert.

.*opsi-configed*: Über dieses Icon fragen Sie die Session-Informationen von allen Clients ab.
image::configed_toolbar_icons_sessioninfo.png["*opsi-configed*: Über dieses Icon fragen Sie die Session-Informationen von allen Clients ab.", pdfwidth=80%]

Wenn Sie den Button betätigen, versucht der `opsiconfd`, eine Verbindung zu allen Clients aufzubauen und Informationen über aktuell aktive Benutzersitzungen zu sammeln. In der Spalte _Session-Informationen_ sehen Sie dann den Accountnamen der jeweiligen aktiven Sitzung. Sie können diese Funktion auch gezielt für ausgewählte Clients über das Kontextmenü oder das Menü _Client_ aktivieren. So vermeiden Sie unnötiges Warten auf Netzwerk-Timeouts, falls versucht wird, eine Verbindung zu ausgeschalteten Rechnern herzustellen.

TIP: Da die Suchfunktion für die Clientliste alle Spalten einschließt, können Sie auf diese Weise auch nach Clients suchen, auf denen ein bestimmter Benutzer angemeldet ist.

[[opsi-manual-configed-client-selection-selecting]]
== Clients markieren

Sie können in der Clientliste einen oder mehrere Clients markieren, um sie gemeinsam zu bearbeiten. Verwenden Sie das Trichter-Icon oder gehen Sie über das Menü _Auswahl_ / _Nur ausgewählte Clients anzeigen_, um die Liste nur auf Ihre ausgewählten Clients zu beschränken.

.*opsi-configed*: Über dieses Icon beschränken Sie die Anzeige auf ausgewählte Clients.
image::configed_toolbar_icons_filter.png["*opsi-configed*: Über dieses Icon beschränken Sie die Anzeige auf ausgewählte Clients.", pdfwidth=80%]

TIP: Die markierten Clients können Sie zu einer existierenden Gruppe hinzufügen, indem Sie sie per Drag{nbsp}&{nbsp}Drop auf einen Gruppennamen in der linken Leiste ziehen.

Über das dritte Icon von links oder über das Menü _Auswahl_ starten Sie den Dialog zur freien Clientsuche, in dem Sie nach Client- und/oder Produkt-Eigenschaften suchen können.

.*opsi-configed*: Über die freie Clientsuche stellen Sie eigene Suchkriterien zusammen.
image::configed_clientselection.png["*opsi-configed*: Über die freie Clientsuche stellen Sie eigene Suchkriterien zusammen.", pdfwidth=80%]

Sie können die Suche nach Clients nicht nur anhand allgemeiner Host-Eigenschaften durchführen, sondern auch Hardware- und Software-Komponenten als Suchkriterien nutzen, egal, ob diese über opsi oder auf anderem Weg installiert wurde. Benutzen Sie das Sternchen (`*`) als Platzhalter für beliebige Texteingaben. Ihre Suchkriterien verknüpfen Sie mit logischem `AND` (und) bzw. `OR` (oder). Sie schließen Sie bestimmte Ergebnisse aus, indem Sie `NOT` (nicht) vor ein Kriterium setzen.

Um weitere Kriterien zu Ihrer Suche hinzuzufügen, nutzen Sie die Auswahlliste _Kriterium hinzufügen_. Ein ungewolltes Suchkriterium entfernen Sie mit einem Klick auf das Papierkorb-Icon am rechten Rand. Um die Suchmaske auf den Ausgangszustand zurückzusetzen, klicken Sie einfach auf _Neue Suche_.

Sie haben die Möglichkeit, Ihre Anfragen unter einem beliebigen Namen zu speichern und sie später über _Auswahl_ / _Gespeicherte Suchanfragen_ wieder aufzurufen. Wenn Sie beim Speichern eine Beschreibung hinzufügen, erscheint diese als Tooltip in der Auswahlliste und hilft Ihnen, sich an den Inhalt der gespeicherten Suche zu erinnern.

.*opsi-configed*: Gespeicherte Suchanfragen
image::configed_clientselection2.png["*opsi-configed*: Gespeicherte Suchanfragen", pdfwidth=80%]

NOTE: Falls zwischen den Anfragen neue Clients zur Umgebung hinzugekommen sind, die den gespeicherten Suchkriterien entsprechen, findet `opsi-configed` diese ebenfalls.

TIP: Sie können dem `opsi-configed` beim Start über die Kommandozeilenoption `-qs` eine gespeicherte Suche übergeben (siehe Abschnitt xref:gui:configed/userguide.html#_startparameter[Startparameter]). Lassen Sie den Namen weg, gibt der Befehl eine Liste der gespeicherten Abfragen aus.

Über das Menü _Auswahl_ können Sie außerdem gezielt nach Clients mit fehlgeschlagenen Aktionen suchen -- entweder auf ein Produkt oder auf einen Zeitraum bezogen.

.*opsi-configed*: Suchen Sie nach fehlgeschlagenen Aktionen.
image::opsi-configed-failedactions-today.png["*opsi-configed*: Suchen Sie nach fehlgeschlagenen Aktionen.", width=800, pdfwidth=80%]

[[opsi-manual-configed-treeview]]
== Clients gruppieren

Über die Baumansicht in der linken Leiste können Sie Ihre Clients in Gruppen verwalten. Die Ansicht gliedert sich in drei Kategorien: _GRUPPEN_, _DIRECTORY_ und _CLIENT-LISTE_. Letztere zeigt automatisch alle Clients der ausgewählten Depots an. Die ersten beiden Abteilungen unterscheiden sich darin, wie oft ein Client darin auftauchen kann. Eine Gruppe ist durch ihren Namen einzigartig definiert und kann nicht dupliziert werden, während ein Client mehreren Gruppen zugeordnet sein kann. Im Zwei _DIRECTORY_ hingegen hat jeder Client einen eindeutigen Ort: Solange keine explizite Zuordnung zu einer Untergruppe stattgefunden hat, wird der Client automatisch in der Gruppe _NICHT_ZUGEWIESEN_ geführt.

NOTE: Ist ein Client ausgewählt, erscheinen alle Gruppen, zu denen er gehört, mit gefüllter Farbfläche.

.*opsi-configed*: Baumansicht
image::opsi-configed-treeview.png["*opsi-configed*: Baumansicht", pdfwidth=80%]

In der Baumansicht stehen folgende Features zur Verfügung:

* Klicken Sie auf einen Baumknoten, also eine Gruppe, um alle Clients, die sich unterhalb dieses Knotens befinden, in der Mitte auf dem Reiter _Clients_ anzuzeigen -- dabei ist kein Client zur Bearbeitung ausgewählt.

* Möchten Sie jedoch einzelne Clients zur Bearbeitung markieren, klicken Sie sie direkt in der Baumansicht an oder markieren diese mit der Maus ([Strg]{plus}Klick bzw. [Umschalt]{plus}Klick).

* Ein Doppelklick auf eine Gruppe zeigt nicht nur die dazugehörigen Clients in der Tabelle an, sondern wählt sie auch gleichzeitig zur Bearbeitung aus.

TIP: Letzteres ist besonders dann praktisch, wenn Sie auf verschiedenen Reitern arbeiten und beispielsweise gerade den Reiter _Logdateien_ geöffnet haben und nur die Protokolle zu bestimmten Clients sehen möchten.

=== Neue Gruppen erstellen

Zusätzliche Gruppen können Sie leicht hinzufügen: Klicken Sie einfach mit der rechten Maustaste auf die übergeordnete Gruppe oder den übergeordneten Knoten, zum Beispiel _GRUPPEN_, und wählen Sie _Untergruppe erzeugen_.

.*opsi-configed*: Gruppe anlegen
image::opsi-configed-treeview-generate-group.png["*opsi-configed*: Gruppe anlegen", pdfwidth=80%]

Anschließend öffnet sich ein Dialogfenster, in das Sie einen Namen und eine Beschreibung für die neue Gruppe eingeben können.

.*opsi-configed*: Name und Beschreibung der Gruppe eintragen
image::opsi-configed-treeview-groupname.png["*opsi-configed*: Name und Beschreibung der Gruppe eintragen", pdfwidth=80%]

=== Clients zu Gruppen hinzufügen

Es gibt verschiedene Wege, um Clients per Drag{nbsp}&{nbsp}Drop zu Gruppen hinzuzufügen oder zu verschieben (siehe Abschnitt <<opsi-manual-configed-client-selection-selecting>>):

* Ziehen Sie Clients direkt aus der Clientliste (Reiter _Clients_) auf eine Gruppe, um sie dort hinzuzufügen.

* Möchten Sie Clients kopieren, ziehen Sie diese aus einer "normalen" Gruppe, z.{nbsp}B. aus dem Knoten _CLIENT-LISTE_, in eine andere Gruppe.

* Um einen Client zu verschieben, ziehen Sie diesen aus einer _DIRECTORY_-Gruppe in eine andere _DIRECTORY_-Gruppe.

=== Gruppen bearbeiten

Klicken Sie mit der rechten Maustaste auf eine Gruppe, um ein Kontextmenü zu öffnen. In diesem finden Sie Einträge, um Gruppen zu bearbeiten, zu löschen, alle enthaltenen Clients auszuwählen sowie um alle Clients aus der Gruppe und eventuell enthaltenen Untergruppen rekursiv zu entfernen.

[[opsi-manual-configed-client-editing]]
== Clients bearbeiten

Klicken Sie mit der rechten Maustaste auf die Liste der Clients (Reiter _Clients_) oder öffnen Sie das Menü _Client_, um mögliche Operationen für opsi-Clients einzublenden. Im Hauptfenster sehen Sie im rechten Bereich ebenfalls einen Dialog, in dem Sie ein paar Eigenschaften und Erweiterungen für den Client konfigurieren. 

.*opsi-configed*: Das Menü *Client*
image::opsi-configed-client-contextmenu.png["*opsi-configed*: Das Menü *Client*", pdfwidth=80%]

//hier
[[opsi-manual-configed-module-uefi-wan-installbyShutdown]]
=== Install on Shutdown, UEFI und WAN

Sie können einige Einstellungen im Feld rechts neben der Client-Liste vornehmen. Dazu gehören unter anderem die Optionen _Install on Shutdown (Windows)_, _UEFI-Boot_ und _WAN-Konfiguration_.

NOTE: Beachten Sie, dass es sich bei der xref:opsi-modules:wan-support.adoc[WAN-Erweiterung] um eine kostenpflichtige Erweiterung handelt. Das heißt, dass Sie eine Freischaltdatei benötigen. Sie erhalten diese, nachdem Sie die Erweiterung gekauft haben. Zu Evaluierungszwecken stellen wir Ihnen kostenlos eine zeitlich befristete Freischaltung zur Verfügung. Bitte kontaktieren Sie uns dazu per mailto:info@uib.de[E-Mail].

* _Install on Shutdown (Windows)_: Es gibt einen etablierten Prozess, um Installationen beim Herunterfahren eines Clients zu konfigurieren (siehe Kapitel xref:opsi-modules:on-shutdown.adoc[Installation bei Shutdown (frei)]).

* _UEFI-Boot_: Konfiguriert einen Client für UEFI-Boot (siehe Kapitel xref:opsi-modules:uefi.adoc[opsi mit UEFI/GPT])

* _WAN-Konfiguration_: Aktiviert die xref:opsi-modules:wan-support.adoc[WAN/VPN-Erweiterung]; wenn das Modul nicht verfügbar ist, erscheint die Checkbox ausgegraut. 

Die WAN-Konfiguration wird aus den Server-Host-Parametern `configed.meta_config.wan_mode_off.*` ausgelesen. Wenn Sie die Standardeinstellung der Parameter übernommen haben, kommt die in Kapitel xref:opsi-modules:wan-support.adoc[WAN/VPN-Erweiterung] beschriebene empfohlene Konfiguration zum Zuge.

TIP: Sie können Informationen zu den Optionen _Install on Shutdown (Windows)_ und _WAN Konfiguration_ als Spalte in der Client-Liste einblenden -- entweder per Kontextmenü der rechten Maustaste oder über das Menü _Client_ / _Sichtbare Spalten_. So sehen Sie direkt in der Übersicht, bei welchen Clients diese Eigenschaften gesetzt sind, und können danach filtern und sortieren.

.*opsi-configed*: Erweiterte Spaltensicht für opsi-Clients
image::opsi-configed-clientinfos.png["*opsi-configed*: Erweiterte Spaltensicht für opsi-Clients", width=800, pdfwidth=80%]

//hier
das  Kapitel hier beschreibt alles, was die Schaltfläche _Client-Konfiguration_ auch einblendet

Clients
Localboot-Produkte
Netboot-Produkte
Host-Parameter (Link zu Server-Konfiguration, Hinweis, dass bestimmte Parameter serverseitig gesetzt werden können)
Hardware-Informationen
Software-Informationen
Logdateien

Clients selbst bearbeiten
Außerdem befinden sich auf der rechten Seite Eigenschaften von dem ausgewählten Client, die bei Auswahl eines Clients editierbar sind.

Auflistung: clientspezifische Operationen (Kontextmenü, Menü _OpsiClient_:


Unter diesem Karteireiter erhalten Sie die letzten - entweder durch das Bootimage oder durch das Localboot-Produkt hwaudit erhobenen - Hardwareinformationen zum ausgewählten Client.





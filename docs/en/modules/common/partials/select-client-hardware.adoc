////
; Copyright (c) uib GmbH (www.uib.de)
; This documentation is owned by uib
; and published under the german creative commons by-sa license
; see:
; https://creativecommons.org/licenses/by-sa/3.0/de/
; https://creativecommons.org/licenses/by-sa/3.0/de/legalcode
; english:
; https://creativecommons.org/licenses/by-sa/3.0/
; https://creativecommons.org/licenses/by-sa/3.0/legalcode
;
; credits: http://www.opsi.org/credits/
////


:Author:    uib GmbH
:Email:     info@uib.de
:Date:      22.01.2024
:Revision:  4.3
:toclevels: 6
:doctype:   book
:icons:     font
:xrefstyle: full

include::common:partial$opsi_terms.adoc[]

[[opsi-select-client-hardware-general]]
=== General Information

There isn't a specific list of hardware that is supported or unsupported by opsi. Given the rapidly changing nature of the technology market, maintaining and updating such a list regularly is impractical.

However, there are key considerations to keep in mind when selecting client hardware. These considerations are not unique to opsi but are more about the general challenges in client management, such as the timing of installations (refer to the section xref:server:components/commandline.adoc#server-components-opsi-wakeup-clients[*opsi-wakeup-clients*]).

Typically, enterprise class devices are more likely to be suitable than consumer devices. For guidance on procuring client hardware, the following resources are useful:

* link:https://www.bitkom.org/EN/ICT-Procurement/Guidelines/Product-Neutral-Tendering-Notebooks[Product-Neutral Tendering of Notebooks]
* link:https://www.bitkom.org/EN/ICT-Procurement/Guidelines/Product-Neutral-Tendering-of-Desktop-PCs[Product-Neutral Tendering of Desktop PCs]

[[opsi-select-client-hardware-ethernet]]
=== Network Connection

NOTE: For many client management functions, having a wired network connection is either very important or necessary.

.RJ45 Connector (Ethernet), link:https://commons.wikimedia.org/wiki/File:Ethernet_RJ45_connector_p1160054.jpg[Quelle]/link:https://creativecommons.org/licenses/by-sa/3.0/deed.de[Lizenz]
image::Ethernet_RJ45_connector_p1160054.jpg["RJ45 Connector (Ethernet)", pdfwidth=20%, width=400]

You require a wired network connection for the following functions, among others:

* Boot Over Network (PXE): This is a fundamental requirement for automating operating system installations and utilizing certain tools. For more information, see: +
** link:https://docs.opsi.org/opsi-docs-en/4.2/manual/products/netboot-products.html[Netboot Products]

** link:https://docs.opsi.org/opsi-docs-en/4.2/manual/modules/local-image.html[Local Images]

** link:https://docs.opsi.org/opsi-docs-en/4.2/manual/modules/clonezilla.html[Image-based Installations]

* Wake on LAN (WoL): This network standard allows for remote powering on of a computer, whether it's in sleep mode or completely shut down.

Despite the considerable bandwidth achieved by WLAN access points, wired network connections remain the better choice for client management. This is particularly true for managing installations across many devices on the same access point, as all these devices share the access point's bandwidth. This can lead to prolonged installation times or, in worse cases, errors and disconnections.

Therefore, when purchasing new hardware, ensure that the device includes a wired network connection. Increasingly, the market is seeing more devices without built-in wired connectivity. In such cases, a cable connection should be possible via a (USB) adapter or a (USB) docking station.

.USB-RJ45 Adapter
image::usb_ext_rj45.png["USB-RJ45 Adapter", pdfwidth=20%, width=400]

NOTE: When using a USB-RJ45 adapter, it's important to be aware of the following considerations.

USB-RJ45 adapters essentially function as external network cards connected via USB. A key implication of this setup is that the MAC address of the network interface identifies the adapter, not the connected device. This poses a challenge since a fixed assignment of MAC addresses to individual devices is crucial for network booting and Wake on LAN functionality.

To address this issue, many manufacturers offer a feature known as MAC address pass-through (also referred to as MAC address override). This feature, typically available as a BIOS option, ensures that the USB adapter utilizes a MAC address generated by the BIOS instead of its own. The BIOS must at least ensure that network boot processes are carried out using the device-specific hardware address generated by the BIOS. For other operations, opsi can manage the necessary configurations and processes.

TIP: Starting with opsi 4.3, devices can also be identified using the SMBIOS UUID (System Management BIOS).

.Activating MAC address pass-through in the BIOS
image::bios_macpassthroug.png["Activating MAC address pass-through in the BIOS", pdfwidth=100%]

[[opsi-select-client-hardware-wol]]
=== Wake on LAN/Wake Up Timer

The device should support Wake on LAN (WoL). Ideally, this functionality should not require any special drivers. If special drivers are necessary, there's a risk that a new Microsoft driver installed during a Windows update might cause WoL to fail until the specific driver is reinstalled.

For devices that lack an onboard Ethernet port, Wake on LAN should still be functional via a USB-RJ45 adapter, provided it uses the MAC address generated through the MAC address pass-through.

TIP: In cases where a wired network connection is unavailable or if the device is not typically connected, the BIOS should allow for setting up a Wake Up Timer. 

[[opsi-select-client-hardware-bios]]
=== BIOS Maintenance

The previous sections have emphasized the importance of BIOS configuration in client management. Setup and maintenance should be script-controlled and non-interactive, allowing opsi products to manage the configuration tasks:

* BIOS update

* Setting/Changing BIOS Password

* Toggling UEFI/Secure Boot

* Activating Wake on LAN

* Enabling MAC Address Pass-Through

* Managing Wake-Up Timer

Even with a BIOS password enabled, script-controlled configuration should remain feasible.

CAUTION: While script-controlled configuration of the BIOS is broadly possible, it's important to note that it might not cover all BIOS options. Therefore, verify that the specific options critical to your needs are configurable via scripts.

Technically, the ability to configure the BIOS relies on an extension of the computer's Windows Management Instrumentation (WMI) system. WMI enables the retrieval and management of information about the computer and its components. The WMI system extensions for BIOS configuration allow for accessing and modifying BIOS settings either through the WMI system or using PowerShell scripts.

For more in-depth information, here are some useful links:

* https://developers.hp.com/hp-client-management/doc/client-management-script-library

* https://developers.hp.com/hp-client-management/doc/Bios-and-Device

* https://docs.lenovocdrt.com/#/tbct/tbct_top

* https://www.dell.com/support/manuals/en-us/command-configure/dellcommandconfigure_ug_4.7/

* https://www.fujitsu.com/emeia/imagesgig5/Fujitsu_DeskView_BIOS_Management_Overview_Tutorial.pdf

* https://www.configjon.com/lenovo-bios-settings-management/

* https://www.configjon.com/dell-bios-settings-management/

* https://www.configjon.com/hp-bios-settings-management/


[[opsi-select-client-hardware-mac-addresses]]
=== List of MAC Addresses

When purchasing a large quantity of computers, integrating these devices into your system is simplified if you have prior knowledge of their MAC addresses. Therefore, it's advisable to request that the supplier provides you with a machine-readable list of the MAC addresses for these computers.

[[opsi-select-client-hardware-ram]]
=== RAM (Random Access Memory)

For a successful network boot, the `opsi-linux-bootimage` needs to be loadable into the working memory (RAM) and initiated. Currently, this process requires a minimum of 2 GB of RAM.

It's worth noting that some Linux distributions, such as recent versions of Ubuntu or Mint, need at least 4 GB of RAM for optimal performance.

[[opsi-select-client-hardware-test]]
=== Testing the Hardware

Before purchasing a large quantity of devices, it is advisable to request a reference device, if possible. This allows you to conduct tests with opsi to ensure compatibility and performance.

TIP: Alternatively, you can request uib GmbH to conduct such a test. Please reach out to us at mailto:sales@uib.de[sales@uib.de] for more information.

[[opsi-select-client-hardware-driver]]
=== Providing Drivers

Ideally, the hardware manufacturer should offer driver packages for their devices on their website. These driver packages should be extractable (unpackable), allowing the opsi server to supply drivers for these specific models.

It's particularly beneficial if the wired network interface does not need a specialized PE (Preinstallation Environment) driver. In other words, the same driver should be compatible with both Windows PE (WinPE) and the fully installed Windows system. 

[[opsi-select-client-hardware-table]]
=== Check List

Wired Network (RJ45):

* on-board (better) or via USB adapter with MAC address pass-through support in the BIOS

* Network boot via IPv4/IPv6

* Wake on LAN support

** with standard drivers

** for MAC address pass-through operation

Script-controlled BIOS configuration:

* BIOS Update

* Set/change BIOS password

* Enable/disable UEFI/Secure Boot

* Enable Wake on LAN

* Enable MAC address pass-through

* Switch Wake Up Timer on/off and set times

Miscellaneous:

* Deployment of drivers/package extractable?

* Provision of drivers/WinPE drivers necessary?

* List of MAC addresses

* Sufficient RAM for boot image (2 GB/4 GB for Linux)

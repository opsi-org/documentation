////
; Copyright (c) uib GmbH (www.uib.de)
; This documentation is owned by uib
; and published under the german creative commons by-sa license
; see:
; https://creativecommons.org/licenses/by-sa/3.0/de/
; https://creativecommons.org/licenses/by-sa/3.0/de/legalcode
; english:
; https://creativecommons.org/licenses/by-sa/3.0/
; https://creativecommons.org/licenses/by-sa/3.0/legalcode
;
; credits: http://www.opsi.org/credits/
////

:Author:    uib GmbH
:Email:     info@uib.de
:Date:      10.01.2024
:Revision:  4.3
:toclevels: 6
:doctype:   book
:icons:     font
:xrefstyle: full

include::common:partial$opsi_terms.adoc[]

=== Preparation

To create opsi packages, you will require the following tools:

* <<opsi-setup-detector-installation_osd,opsi-setup-detector>>
* <<opsi-setup-detector-installation_opb,opsi PackageBuilder>>
* <<opsi-logviewer-installation,opsi-logviewer>>

[[opsi-setup-detector-installation_osd]]
==== Installing *opsi-setup-detector*

The `opsi-setup-detector` is currently available for Windows, Linux, and macOS. You can install this program directly through opsi. It's one of the standard localboot products and is typically available on the opsi server. If it's not already installed, you can deploy the product using the following command:

[source,console]
----
opsi-package-updater install opsi-setup-detector
----

NOTE: The localboot product `opsi-setup-detector` also requires the installation of the product `opsipackagebuilder_wlm`, because the setup detector uses the PackageBuilder (if available).

You should therefore also install the product `opsipackagebuilder_wlm`:

[source,console]
----
opsi-package-updater install opsipackagebuilder_wlm
----

You can then deploy the two products to the desired clients, for example, using the `opsi-configed` management interface.

TIP: For Windows computers, we provide the setup detector as a stand-alone package, which can be installed independently of opsi: https://tools.43.opsi.org/stable/

===== Differences Across Windows, Linux, and macOS

While the `opsi-setup-detector` generally operates similarly across Windows, Linux, and macOS, there are distinct differences in how it analyzes installation files, using various auxiliary programs specific to each operating system:

* On Windows, detailed analyses of Inno Setups are conducted using the integrated tool `innounpack.exe`. Such in-depth analysis of Inno Setups is thus exclusive to the Windows environment.

* For working with the Windows Installer XML (commonly known as the WiX Toolset), the integrated tool `Dark.exe` is employed under Windows. Therefore, this level of detailed analysis is also specific to Windows.

* On Linux systems, `.deb` or `.rpm` packages are analyzed using the standard package management tools on Linux. Consequently, this type of detailed analysis is possible only on Linux systems.


[[opsi-setup-detector-installation_opb]]
==== Installation of the opsi-package-builder

The _opsi PackageBuilder_ is currently available for Windows and Linux and MacOS.

You can install the _opsi PackageBuilder_ via opsi:

The package _opsipackagebuilder_wlm_ belongs to the opsi standard products and should be installed on your opsi-server. If not, use:

[source,shell]
----
opsi-package-updater install opsipackagebuilder_wlm
----

to install it on the opsi-server.

If it is installed on the opsi server, you may use the `opsi-configed` to install the localboot product `opsipackagebuilder_wlm` on your client.

.The opsi PackageBuilder (oPB) may be installed as localboot product `opsipackagebuilder_wlm` on your client.
image::opsi-packagebuilder-install.png["The opsi PackageBuilder (oPB) may be installed as localboot product `opsipackagebuilder_wlm` on your client.",width=800, pdfwidth=80%]


Alternative way:

The installation files / packages of the _opsi PackageBuilder_ can be found here: +
link:https://forum.opsi.org/viewtopic.php?p=32473#p32473[forum.opsi.org - opsi PackageBuilder] +
There you will find in the first lines of the post links to the installation files for Windows and Linux and MacOS. 

NOTE: The _opsi PackageBuilder_  is not made by 'uib' but by Holger Pandel from the opsi-community (thank you!).. +

The _opsi PackageBuilder_ sources and open source license you will find here: +
link:https://github.com/pandel/opsiPackageBuilder[GitHub: opsi PackageBuilder (oPB)] 





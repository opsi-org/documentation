////
; Copyright (c) uib gmbh (www.uib.de)
; This documentation is owned by uib
; and published under the german creative commons by-sa license
; see:
; https://creativecommons.org/licenses/by-sa/3.0/de/
; https://creativecommons.org/licenses/by-sa/3.0/de/legalcode
; english:
; https://creativecommons.org/licenses/by-sa/3.0/
; https://creativecommons.org/licenses/by-sa/3.0/legalcode
; 
; credits: http://www.opsi.org/credits/
////

:Author:    uib gmbh
:Email:     info@uib.de
:Date:      11.01.2021
:doctype: book

include::common:partial$opsi_terms.adoc[]

[[opsi-manual-opsiwebgui-userguide]]
= opsi-webgui User Guide

This chapter describes all functionalities of {opsi-webgui} from the user's point of view.

[[opsi-manual-opsiwebgui-user-requirements]]
== Requirements

* Access to {opsi-configserver} or {opsiconfd}. +

NOTE: The {opsi-webgui} does not require an internet connection during use, it only needs access to the {opsiconfd}.

* One of the following web browsers (on Desktop or Mobile device). 
  - Chrome / Chromium
  - Firefox
  - Safari
  - Microsoft Edge (Chromium-Basis)  +

IMPORTANT: Make sure JavaScript is enabled in the browser.

* A user who is a member of the opsiadmin group (like {opsi-configed}).

[[opsi-manual-opsiwebgui-login]]
== Login

// image::opsi-webgui_login.png[Login, width=250]
image::opsi-webgui_login.png[Login]

. Open https://<configserver-address>:4447/addons/webgui/app.  +
  The application tries to connect to the {opsi-webgui} backend and thus to the {opsiconfd}. 
  If this is successful, the {opsi-configserver} is displayed. 
  Now you can login with a user who is a member of the opsiadmin group (e.g. adminuser).
. Enter the user credentials.
. Press *[ Login ]*.


[[opsi-manual-opsiwebgui-userinterface]]
== User Interface

This section helps you get familiar with the user interface.
{opsi-webgui} is built with accessible and responsive components. 
So that users with disablities can access {opsi-webgui} more effectively.

[[opsi-manual-opsiwebgui-userinterface-mainlayout]]
=== Main Layout 

image::opsi-webgui_mainlayout.png[MainLayout]

The following list describes the user interface components: 

[horizontal]
Menu:: at the top, contains image:opsi-webgui_breadcrumb.png[Breadcrumb] breadcrumb navigation that shows users their location within the application. 
The top menu also includes options like 
xref:opsi-manual-opsiwebgui-tips-selections[View Selections],
xref:opsi-manual-opsiwebgui-opsiclients-actions-ondemand[On Demand],
xref:opsi-manual-opsiwebgui-settings-language[Language],
xref:opsi-manual-opsiwebgui-settings-theme[Theme],
image:opsi-webgui_buttonlogout.png[Logout]Logout, as well as,
xref:opsi-manual-opsiwebgui-settings-quicksave-disable[Track changes] when Quick Save is disabled and any configuration changes need to be saved.

Navigation Bar:: on the left, is for navigating to different pages. 
It also displays the remaining session timeout time.
This navigation bar is responsive in desktop view. 
Click  *<<*  to expand or collapse navigation bar.
The following list describes the menu and sub-menu items for navigating through the pages: +
* Servers
  - All Servers: Manage the opsi-servers. 
  - Configuration: Edit attributes and parameters of the opsi-servers.
* Clients 
  - All Clients: Manage the {opsi-clients}.
  - Creation: Create a new {opsi-client}.
  - Configuration: Edit attributes and parameters of the {opsi-clients}.
  - Logs: View the logs of the {opsi-clients}.
* Products: Deploy products, check dependencies, or edit properties. 
* Support: Find links to support or view OPSI Docs. 
* Settings: Change general settings or manage OPSI settings.

Page Content:: contains page-specific contents.

[[opsi-manual-opsiwebgui-userinterface-pagecontent]]
=== Page Content Layout
This section explains the content area within the page.
For example, the *Clients* page shows the list of clients and client-specific options.

[horizontal]
Header:: above the table, contains 
* Title of the current content. 
Click on the title to expand or collapse the header.
* xref:opsi-manual-opsiwebgui-opsiservers-treeselect[Servers] and xref:opsi-manual-opsiwebgui-opsiclients-groups[Client Groups] selection
Table:: shows list of items that are loaded lazily. 
It has options like +
* image:opsi-webgui_buttonclearselect.png[ClearSelection]to clear selections.
* image:opsi-webgui_table_filter.png[Filter] to filter the table contents by ID.
* image:opsi-webgui_table_columnselect.png[ColumnSelection]to choose columns. 
* image:opsi-webgui_table_sort.png[Sort]to sort the table by a column in ascending or descending order.
* image:opsi-webgui_table_refresh.png[Refresh] to refresh the table contents. +
The table row contains item-specific options likeimage:opsi-webgui_buttonconfig.png[Config]Configuration orimage:opsi-webgui_buttonlog.png[Logs]Logs, which opens a split view for the selected option, or animage:opsi-webgui_buttonclientactions.png[Actions]action menu.
The table also has a context menu that opens with a right click and contains table-specific and item-specific options. +
Footer:: below the table, contains pagination for navigating the table. 
Navigation is also possible via infinite scrolling.

NOTE: The layout for mobile devices looks a little different. 
The table contents are stacked.
There is no split view for the pages, but an overlapping view. 
And the navigation bar is toggleable.

[[opsi-manual-opsiwebgui-opsiservers]]
== {opsi-server}
In opsi it is possible to integrate different servers. 
The main server is the {opsi-configserver}. 
All others are called {opsi-depotserver}. 
(Learn more about xref:../server/overview#opsi-manual-server-overview[opsi-server]). +
After logging into the {opsi-webgui}, the server selected by default is {opsi-configserver}, which is always highlighted in bold.
You can manage server selection by navigating to *Servers > All Servers*.

image::opsi-webgui_servers.png[Servers]

[[opsi-manual-opsiwebgui-opsiservers-treeselect]]

It is also possible to select servers from the table header on the *Clients* and *Products* page.

image::opsi-webgui_serverstreeselect.png[Servers Tree]
// image:opsi-webgui_serverstreeselect.png[ServersTreeselect, width=200]

[[opsi-manual-opsiwebgui-opsiservers-attributes-parameter]]
=== Server Attributes and Parameters
To edit server attributes and parameters,

. Navigate to *Servers > All Servers*. 
. Clickimage:opsi-webgui_buttonconfig.png[Configuration]in the table row. 
Or right-click the table row and select *Configuration* from the context menu.
. Edit the fields.
. Click on *Save*.

or navigate to *Servers > Configuration*.

include::common:partial$webgui.adoc[tags=warn_quicksave]

[[opsi-manual-opsiwebgui-opsiclients]]
//[[opsi-manual-opsiwebgui-clients-creation]]
== {opsi-clients}
All clients for the selected servers are listed on the Clients page. 
To view and manage clients, navigate to *Clients > All Clients*.

image::opsi-webgui_clients.png[Clients]

[[opsi-manual-opsiwebgui-opsiclients-creation]]
=== Create a client
Creating a client and adding it to a {opsi-server} are the first steps to manage them. 
To create a {opsi-client}, +

. Navigate to *Clients > Creation*.
. Fill out the form. 
. Click on *[ Create ]*.

image::opsi-webgui_clientcreation.png[Client Creation]

NOTE: Client creation requires atleast *ID* field. 
The created client will be added to the {opsi-configserver}.

[[opsi-manual-opsiwebgui-opsiclients-actions]]
=== Client Actions
To select client actions, 

. Navigate to *Client > All Clients*.
. Select the client you want to perform action on.
. Click onimage:opsi-webgui_buttonclientactions.png[Actions]or right-click the table row. 
. Click on the required action. 
It will show a popup with confirmation.
. Click on *[ Delete ]* for client deletion and *[ Confirm ]* for other actions.

image::opsi-webgui_clientactions.png[Client Actions]

[[opsi-manual-opsiwebgui-opsiclients-actions-clientagent]]
==== image:opsi-webgui_buttondeployagent.png[Deploy Client Agent]
In order to connect a client to OPSI and integrate it as a real {opsi-client}, opsi-client-agent must be deployed on it.
The deployment of the {opsi-client-agent} is also possible via *Clients > Creation*. +

NOTE: The deployment of the {opsi-client-agent} is not required if operating system is installed with OPSI.

image::opsi-webgui_clientdeployagent.png[Deploy Client Agent]

[[opsi-manual-opsiwebgui-opsiclients-actions-ondemand]]
==== image:opsi-webgui_buttonondemand.png[OnDemand]
You can push installations and apply changes immediately to the client by executing `on_demand` event on selected clients.  +

NOTE: It is possible to execute `on_demand` on multiple clients. 
Select multiple clients and click image:opsi-webgui_iconondemand.png[Ondemand Icon] in the topmenu. 
It shows a confirmation popup with list of selected clients. 
You can remove unneeded clients from this list.

image::opsi-webgui_clientondemand.png[On Demand]

[[opsi-manual-opsiwebgui-opsiclients-actions-notify]]
==== image:opsi-webgui_buttonnotify.png[Notify]
Notifying a client is useful in situations that require client attention. 
The user can send a popup message or warning to selected clients before forcing a reboot or immediate actions.

image::opsi-webgui_clientnotify.png[NotifyClient]

[[opsi-manual-opsiwebgui-opsiclients-actions-reboot]]
==== image:opsi-webgui_buttonreboot.png[Reboot]
Rebooting a client executes the reboot event on the selected client. 

image::opsi-webgui_clientreboot.png[ClientReboot]

[[opsi-manual-opsiwebgui-opsiclients-actions-delete]]
==== image:opsi-webgui_buttondeletion.png[Delete]
Deleting a client removes it from clients list and all its related data. 

image::opsi-webgui_clientdeletion.png[Client Deletion]

[[opsi-manual-opsiwebgui-opsiclients-groups]]
=== Client Groups
Clients are mainly grouped into `groups`, `clientdirectory` and `clientlist`. 
A client should only have one membership in `clientdirectory`, but can have multiple memberships in `groups`. 
A client that is not a member of `clientdirectory` is always assigned to its subgroup `NOT_ASSIGNED`. 
All clients for the selected depots are listed in `clientlist`.

You can view and select groups from the tree component in the table header on the *Clients* and *Products* page. 
The number in this component indicates the number of selected clients. 
Clicking on it displays the selection list.

image::opsi-webgui_clientgroups.png[Client Groups]

TIP: After the group selection, sort the clients table by `selections` to get a detailed view.

[[opsi-manual-opsiwebgui-opsiclients-attributes-parameter]]
=== Client Attributes and Parameters
To edit client attributes and parameters,

. Navigate to *Clients > All Clients*. 
. Click image:opsi-webgui_buttonconfig.png[Configuration] in the table row. 
Or right-click the table row and select *Configuration* from the context menu.
. Edit the fields.
. Click on *[ Save ]*.

or navigate to *Clients > Configuration*.

image::opsi-webgui_clientconfig.png[Client Configuration]

include::common:partial$webgui.adoc[tags=warn_quicksave]

[[opsi-manual-opsiwebgui-opsiclients-logs]]
=== Client Logs
To view client logs,

. Navigate to *Clients > All Clients*. 
. Click image:opsi-webgui_buttonlog.png[Logs Button] in the table row. 
Or right-click the table row and select *Logs* from the context menu.
. Choose a log type from the list of `instlog`, `clientconnect`, `userlogin`, `bootimage`, `opsiconfd`.
. Enter a filter in the filter box or select the log level to filter logs.

By default, the log type is `instlog` and the log level is 5. 
Logs can be also viewed in *Clients > Logs*.

image::opsi-webgui_clientlogs.png[Client Logs]

[[opsi-manual-opsiwebgui-products]]
== Products 
On the *Products* page you can manage localboot and netboot products and also configure them for different opsi-servers or {opsi-clients}. 

image::opsi-webgui_products.png[Products]

TIP: Navigate to *Clients* and click theimage:opsi-webgui_buttonproducts.png[Products]button in the top right corner of the table header for a split view of clients and products. 
This allows the user to multitask like selecting clients and managing their products more easily.

[[opsi-manual-opsiwebgui-products-state]]
=== Product States
If no client is selected, the *Products* page lists the products of the selected server(s). 
If a product has multiple and conflicting values for the currently selected clients/servers, a *<mixed>* status will be displayed in the corresponding field, with more information in the tooltip. 
The different colored icons in each table column indicate the following:

* Installation Status:
[horizontal]
  image:opsi-webgui_productstat_unequal_warning.png[UnknownInstallationStatusOnClients]:: At least one of the selected clients has an image:opsi-webgui_productstat_unknown.png[unknown] installation status.
  image:opsi-webgui_productstat_unequal_success.png[InstalledInstallationStatusOnClients]:: All selected clients have either image:opsi-webgui_productstat_installed.png[installed] or *_not-installed_*/*_none_*/*_null_* status.
* Action Result:
[horizontal]
  image:opsi-webgui_productstat_unequal_danger.png[FailedActionResultOnClients]:: At least one of the selected clients has an image:opsi-webgui_productstat_failed.png[failed] action result.
  image:opsi-webgui_productstat_unequal_success.png[SuccessfulActionResultOnClients]:: All selected clients have either image:opsi-webgui_productstat_successful.png[successful] or *_none_*/*_null_* action result. 
* Product Version: If multiple servers and clients are selected, you can click the tooltip to view the installed version for the clients.
  - Client related:
[horizontal]
    image:opsi-webgui_productstat_version_clientoutdated.png[OutdatedProductVersionOnClients]:: At least one of the selected clients has an outdated product from its server.
  - Server related: 
[horizontal]
    image:opsi-webgui_productstat_version_server_equal.png[EqualProductVersionOnServers]:: All selected servers has the same product version.
    image:opsi-webgui_productstat_version_server_unequal.png[UnequalProductVersionOnServers]:: The selected servers have different versions of the product.
    image:opsi-webgui_productstat_version_server_star.png[NoProductOnSomeServers]:: Not every selected server has this product.

Note that the above multi-valued columns can be sorted. It is sorted in the following or reverse order:

[horizontal]
InstallationStatus:: _installed_ - _unknown_ - _none/not_installed_
ActionResult:: _successful_ - _failed_ - _none_
ProductVersion:: _outdated on clients and unequal on servers_ - _outdated on clients and not on every servers_ - _outdated on clients_ - _unqual on some servers_
// client_outdated _and_ unequal_on_servers, client_outdated _and_ not_on_every_server, client_outdated, unequal_on_servers - not_on_every_server

[[opsi-manual-opsiwebgui-products-manage]]
=== Install, Uninstall or Update Products on Clients
To install, uninstall or update a product on clients,

. Navigate to *Products*.
. Select clients from xref:opsi-manual-opsiwebgui-opsiclients-groups[Client Groups] or from xref:opsi-manual-opsiwebgui-opsiclients[Clients] page.
. Select the product you want to perform action on.
. If required, click on image:opsi-webgui_buttonconfig.png[Configuration] in the table row and click on the *Properties* tab to edit the xref:opsi-manual-opsiwebgui-products-properties[product properties].
. Click the *ActionRequest* dropdown and select the required action from the available options such as setup, uninstall, update, once, always, custom and none.

The action is performed on the product along with its xref:opsi-manual-opsiwebgui-products-dependencies[dependencies].

To apply an action on multiple products,

. Select products or product groups.
. Click the *ActionRequest* dropdown in the table column header.
The dropdown contains any options that may not be available for some of the selected products. 
In this case, a warning message is displayed with a list of products that could not perform the action.

image::opsi-webgui_productactionreq.png[Product Actionrequest]

NOTE: Find about xref:opsi-manual-opsiwebgui-opsiclients-actions-ondemand[on_demand] if you want to apply these installations immediately to the client.


include::common:partial$webgui.adoc[tags=warn_quicksave]

[[opsi-manual-opsiwebgui-products-dependencies]]
===  Product Dependencies
The dependencies list the products that the selected product requires in order to work. 
It also defines the order of installation between these products.
Depending on the product, there are several requirement types, such as

[horizontal]
_required_:: The main product requires the dependent product, but the installation order is not important/specified.
_pre-required_:: The dependent product must be installed before the main product.
_post-required_:: The dependent product must be installed after the main product.

To view dependencies, 

. Click onimage:opsi-webgui_buttonconfig.png[Config Button]in the product row.
. Select the *[Dependencies]* tab.

image::opsi-webgui_productdependency.png[Product Dependencies]

[[opsi-manual-opsiwebgui-products-properties]]
=== Product Properties
The product properties show the server's default values when no clients are selected.
By default, each client has the property values from its server.
If at least one client is selected, you will see its server's default values or a client-specific value that has overridden its server value.

To update product properties,

. Navigate to *Products* page.
. Select clients from clients group.
. Click onimage:opsi-webgui_buttonconfig.png[Config Button]in the required product's row.
. Select the *[Property-Configuration]* tab.
. Update properties by clicking the Boolean Properties check box or selecting one or more options from the Unicode Properties dropdown. 
The options in the dropdown can be filtered by keyword. 
If the properties are editable, the keyword entered in the filter box can be added as an option by clicking the *[Add]* button or pressing *Enter*. 
The newly entered option is saved only when selected.

When you update properties, the changes affect only the selected clients, not their servers. 


include::common:partial$webgui.adoc[tags=warn_quicksave]

image::opsi-webgui_productprop.png[Product Properties]

[horizontal]
Description:: The product description is displayed above the tabs.
Warnings:: Some of the warnings are,
* _No clients are selected, the changes will be applied to the server_.
* _This product is only installed on 2/5 of the currently selected servers._
* _Different versions exists for this product._
image:opsi-webgui_buttoninfo.png[Info]:: in the property id, displays more details about the property, including the default value defined for the product, the default value of the server and the description of the property.
<mixed>::  If the selected clients have different values, the status *_<mixed>_* is displayed. 
image:opsi-webgui_productstat_version_clientunequal.png[UnequalPropOnClients]:: Click this icon to the right of the value dropdown to see the different values for the selected clients.

If the selected servers have the product with different versions, it is possible that they have different properties or different default values. 
Similar to the product version, it is marked with icons, such as +

[horizontal]
image:opsi-webgui_productstat_version_server_unequal.png[UnequalDefaultPropsOnServers]:: The selected servers have different default values for this product.
image:opsi-webgui_productstat_version_server_star.png[UnequalPropertyOnServers]:: Not every server from the current selection has this property.

[[opsi-manual-opsiwebgui-products-groups]]
=== Product Groups
Products can be added to groups for better management and also for easier installation of multiple products. 

To view groups,

. Navigate to the *Products* page.
. In the table header, click Product Group tree component.

image::opsi-webgui_productgroups.png[Product Groups]

Currently it is not possible to add a product to a group in {opsi-webgui}, but if groups are already defined in your environment (e.g. via {opsi-configed}), you can select the groups. 
This selects all products within the group. 
This makes it easier to install via the *ActionRequest* dropdown in the table column header.

TIP: After the group selection, sort the products table by `selections` to get a detailed view.

[[opsi-manual-opsiwebgui-settings]]
== Settings
The settings mainly include application options such as Language, Theme or Quick Save, as well as opsi-specific settings such as opsi extensions. 
The application settings are stored as cookies to save user preferences and simplify user experience. 
Find out how {opsi-webgui} uses xref:opsi-manual-opsiwebgui-settings-cookies[Cookies].

[[opsi-manual-opsiwebgui-settings-language]]
=== Language
{opsi-webgui} is available in several languages. 
There are two ways to change the language. 
At the bottom of the login page or in the top menu of the home page, click the Language dropdown. 
English is the default language.

image::opsi-webgui_language.png[Language]

[[opsi-manual-opsiwebgui-settings-theme]]
=== Theme
{opsi-webgui} has a default *Light* theme, which has a white background with dark text.
There is also a *Dark* theme that has a dark background with light text.
To change the {opsi-webgui} theme, click the Theme dropdown in *Settings > General* or in the top menu.

image::opsi-webgui_theme.png[Theme]

[[opsi-manual-opsiwebgui-settings-quicksave]]
=== Quick Save
This option allows the user to decide whether to save the configuration changes immediately or later.
Quick Save is enabled by default, which means the changes will be saved immediately.
When Quick Save is disabled, changes are saved locally. 
The user can edit or delete these changes and save them later.

The quick save feature is available for the following changes:

- Edit {opsi-configserver} or {opsi-client} parameters
- Install, uninstall or update products
- Edit product properties

[[opsi-manual-opsiwebgui-settings-quicksave-disable]]
==== Disable Quick Save
To disable Quick save, 

image::opsi-webgui_quicksave.png[Quicksave]

. Click on the Quick Save toggle button in *Settings > General*.
. Make configuration changes.
. Click on image:opsi-webgui_buttontrackchanges.png[ButtonTrackchanges] button appeared in the top menu. 
A popup opens with an overview of all changes.
. Enter a filter in the filter box to filter the changes.
. Click *[Save all]* to save all changes.

image::opsi-webgui_trackchanges.png[Trackchanges]

[[opsi-manual-opsiwebgui-settings-modules]]
=== OPSI Extensions
Navigate to *Settings > OPSI* to view the modules content, which shows all the available opsi extensions.

image::opsi-webgui_opsimodules.png[Modules]

[[opsi-manual-opsiwebgui-settings-cookies]]
=== Cookies
The {opsi-webgui} uses HTTP cookies to store data on the user's device through the web browser. 
{opsi-webgui} uses:

. Session cookies for session management.
. Functional cookies to save user preferences such as
  - Language
  - Theme
  - Quick save state
  - Table settings like sort by and column selection

These cookies help users use {opsi-webgui} more easily by remembering their preferences.

[[opsi-manual-opsiwebgui-tips]]
== Tips and tricks

[[opsi-manual-opsiwebgui-tips-selections]]
=== View Selections

The number displayed inside the tree component shows the count of selected servers, clients or products. 
Click on this number to view selections.

All the selections can be viewed together. 
Click onimage:opsi-webgui_buttoninfo.png[Info]at the topmenu. 
It shows a popup with the list of selected servers and clients. 

image::opsi-webgui_selections.png[Selections]

[[opsi-manual-opsiwebgui-troubleshooting]]
== Troubleshooting

[[opsi-manual-opsiwebgui-troubleshooting-emptyconfigserver]]
=== Empty {opsi-configserver} Id
_Empty {opsi-configserver} Id field in the Login page_: This can happen when you lose access to {opsi-configserver} admin page or to opsiconfd. +

  * Access https://<configserver-address>:4447/admin.
  * Restart {opsiconfd}.

[[opsi-manual-opsiwebgui-troubleshooting-blankpage]]
=== Blank Page Content 
_Empty page content with visible top and navigation menu_: This can happen if your session has expired. +

  * Reload opsi-webgui.
  * Access https://<configserver-address>:4447/addons/webgui/app/login.

